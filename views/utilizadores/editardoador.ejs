<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Doador</title>
    <link rel='stylesheet' href='/stylesheets/utilizadores/registardoador.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
    <%- include('../general/header',{username:username, userId:userId}) -%>
        <main>
            <%- include('../general/sidebar', { activeItem: 'pagina3' }) -%>

                <div class="content">

                    <div class="informacaogeral">
                        <h2>Informação Doador</h2>
                        <form action="/donators/update/<%=donator._id %>" method="post" enctype="multipart/form-data">
                            <div id="formContent">
                                <div id="leftside">
                                    <div id="upload-box">
                                        <input type="file" id="upload-input" name="file" accept="image/*"
                                            onchange="previewImage(event)" />
                                        <p>Clique para fazer upload ou arraste e solte uma imagem aqui</p>
                                    </div>
                                </div>
                                <div id="rightside">
                                    <div class="inputContainer">
                                        <label for="name">Nome:</label>
                                        <input type="text" id="name" name="name" value="<%=donator.name %>"
                                            required>
                                    </div>
                                    <div class="inputContainer">
                                        <label for="phone">Telemóvel:</label>
                                        <input type="tel" id="phone" name="phone" value="<%=donator.phone %>"
                                            required="[0-9]{9}">
                                    </div>
                                    <div class="inputContainer">
                                        <label for="email">Email:</label>
                                        <input type="email" id="email" name="email" value="<%=donator.email %>"
                                            required>
                                    </div>
                                    <div class="inputContainer">
                                        <label for="address">Morada:</label>
                                        <input type="text" id="address" name="address"
                                        value="<%=donator.address %>" required>
                                    </div>
                                    <div class="inputContainer">
                                        <label for="postCode">Código-Postal:</label>
                                        <input type="text" id="postCode" name="postCode"
                                        value="<%=donator.postCode %>" required="[0-9]{4}-[0-9]{3}">
                                    </div>
                                    <div class="inputContainer">
                                        <label for="city">Cidade:</label>
                                        <input type="text" id="city" name="city" value="<%=donator.city %>"
                                            required>
                                    </div>
                                </div>
                            </div>
                            <button type="submit">Guardar</button>
                        </form>
                    </div>
        </main>
        <script>
            function previewImage(event) {
            const input = event.target;
            const reader = new FileReader();
        
            reader.onload = function() {
                const imgElement = document.createElement('img');
                imgElement.src = reader.result;
                imgElement.style.maxWidth = '100%';
                imgElement.style.maxHeight = '100%';
        
                const previewContainer = document.querySelector('#preview-container');
                previewContainer.innerHTML = ''; // Limpa qualquer prévia existente
                previewContainer.appendChild(imgElement);
            };
        
            reader.readAsDataURL(input.files[0]);
        }
        </script>
</body>
</html>