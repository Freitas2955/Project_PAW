<app-navbar></app-navbar>
<app-bar></app-bar>
<main>
  <header>
    <h1>Campanhas</h1>
    <div class="buttons">
      <button *ngIf="type=='Partner'" id="criar" [routerLink]="['/registarcampanha']" id="filtro">Criar
        Campanha</button>
      <button *ngIf="type=='Donator'" id="filtro" [routerLink]="['/compras']">Histórico</button>
    </div>

    <script>
      function toggleDropdown() {
        var dropdownContent = document.getElementById("dropdownContent");
        if (dropdownContent.style.display === "none") {
          dropdownContent.style.display = "block";
        } else {
          dropdownContent.style.display = "none";
        }
      }
    </script>
  </header>

  <div class="campanhas">
    <div class="card" *ngFor="let campaign of campaigns">
      <div class="content">
        <div class="info">
          <header>
            <h3>Nome: {{campaign.name}}</h3>
          </header>
          <p>Custo: {{campaign.cost}}</p>
          <p>Descrição: {{campaign.description}} </p>
          <div class="detalhes" style="display: flex; gap: 5%;">
            <button *ngIf="type == 'Donator'" (click)="comprar(campaign._id,userId)">Comprar</button>
            <button *ngIf="type == 'Partner'" (click)="eliminar(campaign._id)" id="delete">Eliminar</button>
            <button [routerLink]="['/campanhas/show', campaign._id]">Detalhes</button>
          </div>
        </div>
        <div id="preview-container">
          <div *ngIf="campaign.imageUrl">
            <img id="preview-image" [src]="campaign.imageUrl" alt="Pré-visualização da Imagem" />
          </div>
        </div>
      </div>
    </div>
  </div>

</main>